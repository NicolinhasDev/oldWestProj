<html>

<head>
    <title>Aula06</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>

<body>
    <script src="js/three.js"></script>
    <script src="js/controls/OrbitControls.js"></script>
    <script src="js/loaders/GLTFLoader.js"></script>
    <script>
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        var controls = new THREE.OrbitControls(camera, renderer.domElement);
        //--------

        //Iluminação		
		const directLight = new THREE.DirectionalLight(0xffffff, 1);
		directLight.position.set(-10, 0, 10);
		directLight.target.position.set(0, 0, 0);
		const ambientLight = new THREE.AmbientLight(0xffffff, 1);
		scene.add(ambientLight, directLight);
		scene.add(directLight.target);

        const gridHelper = new THREE.GridHelper(10, 10);
        //scene.add(gridHelper);

        const axesHelper = new THREE.AxesHelper(5); // Cria um guia para os eixos cartesianos
        //scene.add(axesHelper); 						// Adiciona os eixos na cena

        var loader = new THREE.TextureLoader();


        colorMap = loader.load("img/ground.jpg");
        spacebg = loader.load("img/space.jpg");

        scene.background = spacebg;

        const ground_geometry = new THREE.BoxGeometry(70, 0.5, 50);
        var ground_material = new THREE.MeshBasicMaterial({
            map: colorMap
        });

        const ground = new THREE.Mesh(ground_geometry, ground_material);

        scene.add(ground);

        // Loader
		const gltfLoader = new THREE.GLTFLoader();
		
		const url = '/assets/cliff/Desert_Western_Cliff_Layered_XL_02_uk5oded_High.gltf';
		
		gltfLoader.load(url, (gltf) => {
			gltf.scene.scale.set(1, 1, 1);
			const root = gltf.scene;
			// console.log(dumpObject(root).join('\n'));
			cliff = root.getObjectByName('Sketchfab_Scene')
			cliff.position.z = -10;
			scene.add(root);
		})


         //camera.position.x = 4;
        camera.position.y = 20;
        camera.position.z = 50;

        //---------
        var time = 0;
        var animate = function () {
            time += 0.01;
            requestAnimationFrame(animate);

            //ground.rotation.y += 0.003;
            
            controls.update();

            renderer.render(scene, camera);
        };
        animate();
    </script>
</body>

</html>